/*!
 * w-dwdata-builder v1.0.33
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("fs"),require("path"),require("crypto"),require("events"),require("chokidar"),require("url"),require("pino")):"function"==typeof define&&define.amd?define(["fs","path","crypto","events","chokidar","url","pino"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-dwdata-builder"]=e(t.fs,t.path,t.crypto,t.events,t.chokidar,t.url,t.pino)}(this,function(t,e,r,n,o,i,a){"use strict";var u="undefined"!=typeof document?document.currentScript:null,c=Array.isArray,s="object"==typeof global&&global&&global.Object===Object&&global,f="object"==typeof self&&self&&self.Object===Object&&self,l=s||f||Function("return this")(),d=l.Symbol,p=Object.prototype,h=p.hasOwnProperty,v=p.toString,y=d?d.toStringTag:void 0;var m=Object.prototype.toString;var g=d?d.toStringTag:void 0;function w(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":g&&g in Object(t)?function(t){var e=h.call(t,y),r=t[y];try{t[y]=void 0;var n=!0}catch(t){}var o=v.call(t);return n&&(e?t[y]=r:delete t[y]),o}(t):function(t){return m.call(t)}(t)}function b(t){return null!=t&&"object"==typeof t}function _(t){return"symbol"==typeof t||b(t)&&"[object Symbol]"==w(t)}var S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;function O(t,e){if(c(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!_(t))||(j.test(t)||!S.test(t)||null!=e&&t in Object(e))}function $(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function x(t){if(!$(t))return!1;var e=w(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var k,A=l["__core-js_shared__"],M=(k=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"";var D=Function.prototype.toString;function C(t){if(null!=t){try{return D.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var E=/^\[object .+?Constructor\]$/,T=Function.prototype,N=Object.prototype,P=T.toString,F=N.hasOwnProperty,R=RegExp("^"+P.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function I(t){return!(!$(t)||(e=t,M&&M in e))&&(x(t)?R:E).test(C(t));var e}function z(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return I(r)?r:void 0}var B=z(Object,"create");var L=Object.prototype.hasOwnProperty;var H=Object.prototype.hasOwnProperty;function Y(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function U(t,e){return t===e||t!=t&&e!=e}function W(t,e){for(var r=t.length;r--;)if(U(t[r][0],e))return r;return-1}Y.prototype.clear=function(){this.__data__=B?B(null):{},this.size=0},Y.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Y.prototype.get=function(t){var e=this.__data__;if(B){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return L.call(e,t)?e[t]:void 0},Y.prototype.has=function(t){var e=this.__data__;return B?void 0!==e[t]:H.call(e,t)},Y.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=B&&void 0===e?"__lodash_hash_undefined__":e,this};var J=Array.prototype.splice;function G(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}G.prototype.clear=function(){this.__data__=[],this.size=0},G.prototype.delete=function(t){var e=this.__data__,r=W(e,t);return!(r<0)&&(r==e.length-1?e.pop():J.call(e,r,1),--this.size,!0)},G.prototype.get=function(t){var e=this.__data__,r=W(e,t);return r<0?void 0:e[r][1]},G.prototype.has=function(t){return W(this.__data__,t)>-1},G.prototype.set=function(t,e){var r=this.__data__,n=W(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var q=z(l,"Map");function V(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Z(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Z.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(q||G),string:new Y}},Z.prototype.delete=function(t){var e=V(this,t).delete(t);return this.size-=e?1:0,e},Z.prototype.get=function(t){return V(this,t).get(t)},Z.prototype.has=function(t){return V(this,t).has(t)},Z.prototype.set=function(t,e){var r=V(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function K(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(K.Cache||Z),r}K.Cache=Z;var Q,X,tt,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/\\(\\)?/g,nt=(Q=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,function(t,r,n,o){e.push(n?o.replace(rt,"$1"):r||t)}),e},X=K(Q,function(t){return 500===tt.size&&tt.clear(),t}),tt=X.cache,X),ot=nt;function it(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var at=d?d.prototype:void 0,ut=at?at.toString:void 0;function ct(t){if("string"==typeof t)return t;if(c(t))return it(t,ct)+"";if(_(t))return ut?ut.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function st(t){return null==t?"":ct(t)}function ft(t,e){return c(t)?t:O(t,e)?[t]:ot(st(t))}function lt(t){if("string"==typeof t||_(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function dt(t,e){for(var r=0,n=(e=ft(e,t)).length;null!=t&&r<n;)t=t[lt(e[r++])];return r&&r==n?t:void 0}function pt(t,e,r){var n=null==t?void 0:dt(t,e);return void 0===n?r:n}function ht(t){return"[object String]"===Object.prototype.toString.call(t)}function vt(t){return!(!ht(t)||""===t)}var yt=/\s/;var mt=/^\s+/;function gt(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&yt.test(t.charAt(e)););return e}(t)+1).replace(mt,""):t}var wt=/^[-+]0x[0-9a-f]+$/i,bt=/^0b[01]+$/i,_t=/^0o[0-7]+$/i,St=parseInt;function jt(t){if("number"==typeof t)return t;if(_(t))return NaN;if($(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=$(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=gt(t);var r=bt.test(t);return r||_t.test(t)?St(t.slice(2),r?2:8):wt.test(t)?NaN:+t}var Ot=1/0;function $t(t){return t?(t=jt(t))===Ot||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function xt(t){var e=$t(t),r=e%1;return e==e?r?e-r:e:0}function kt(t){let e=!1;if(vt(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(function(t){return t!=t}(t))return!1;e=!0}return e}function At(t){if(!kt(t))return 0;return $t(t)}function Mt(t){return!!kt(t)&&(t=At(t),"number"==typeof(e=t)&&e==xt(e));var e}var Dt=l.isFinite,Ct=Math.min;var Et=function(t){var e=Math[t];return function(t,r){if(t=jt(t),(r=null==r?0:Ct(xt(r),292))&&Dt(t)){var n=(st(t)+"e").split("e");return+((n=(st(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round"),Tt=Et;function Nt(t){if(!kt(t))return 0;t=At(t);let e=Tt(t);return"0"===String(e)?0:e}function Pt(t){if(!Mt(t))return!1;return Nt(t)>=0}function Ft(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function Rt(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}function It(t,e={}){let r=pt(e,"fs");if(!r.existsSync(t))return!1;let n=r.lstatSync(t);return!n.isFile()&&!n.isSymbolicLink()}function zt(e){return It(e,{fs:t})}function Bt(t,e={}){let r=pt(e,"fs");if(It(t,{fs:r}))return{success:"input folder is already exists: "+t};if(r.existsSync(t))return{error:"input path already exists: "+t};try{r.mkdirSync(t,{recursive:!0})}catch(t){return{error:t}}return{success:"done: "+t}}function Lt(e){return Bt(e,{fs:t})}function Ht(t){var e=this.__data__=new G(t);this.size=e.size}Ht.prototype.clear=function(){this.__data__=new G,this.size=0},Ht.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Ht.prototype.get=function(t){return this.__data__.get(t)},Ht.prototype.has=function(t){return this.__data__.has(t)},Ht.prototype.set=function(t,e){var r=this.__data__;if(r instanceof G){var n=r.__data__;if(!q||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Z(n)}return r.set(t,e),this.size=r.size,this};function Yt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Z;++e<r;)this.add(t[e])}function Ut(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Wt(t,e){return t.has(e)}Yt.prototype.add=Yt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Yt.prototype.has=function(t){return this.__data__.has(t)};function Jt(t,e,r,n,o,i){var a=1&r,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var s=i.get(t),f=i.get(e);if(s&&f)return s==e&&f==t;var l=-1,d=!0,p=2&r?new Yt:void 0;for(i.set(t,e),i.set(e,t);++l<u;){var h=t[l],v=e[l];if(n)var y=a?n(v,h,l,e,t,i):n(h,v,l,t,e,i);if(void 0!==y){if(y)continue;d=!1;break}if(p){if(!Ut(e,function(t,e){if(!Wt(p,e)&&(h===t||o(h,t,r,n,i)))return p.push(e)})){d=!1;break}}else if(h!==v&&!o(h,v,r,n,i)){d=!1;break}}return i.delete(t),i.delete(e),d}var Gt=l.Uint8Array;function qt(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Vt(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var Zt=d?d.prototype:void 0,Kt=Zt?Zt.valueOf:void 0;function Qt(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}var Xt=Object.prototype.propertyIsEnumerable,te=Object.getOwnPropertySymbols,ee=te?function(t){return null==t?[]:(t=Object(t),Qt(te(t),function(e){return Xt.call(t,e)}))}:function(){return[]};function re(t){return b(t)&&"[object Arguments]"==w(t)}var ne=Object.prototype,oe=ne.hasOwnProperty,ie=ne.propertyIsEnumerable,ae=re(function(){return arguments}())?re:function(t){return b(t)&&oe.call(t,"callee")&&!ie.call(t,"callee")},ue=ae;var ce="object"==typeof exports&&exports&&!exports.nodeType&&exports,se=ce&&"object"==typeof module&&module&&!module.nodeType&&module,fe=se&&se.exports===ce?l.Buffer:void 0,le=(fe?fe.isBuffer:void 0)||function(){return!1},de=/^(?:0|[1-9]\d*)$/;function pe(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&de.test(t))&&t>-1&&t%1==0&&t<e}function he(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var ve={};ve["[object Float32Array]"]=ve["[object Float64Array]"]=ve["[object Int8Array]"]=ve["[object Int16Array]"]=ve["[object Int32Array]"]=ve["[object Uint8Array]"]=ve["[object Uint8ClampedArray]"]=ve["[object Uint16Array]"]=ve["[object Uint32Array]"]=!0,ve["[object Arguments]"]=ve["[object Array]"]=ve["[object ArrayBuffer]"]=ve["[object Boolean]"]=ve["[object DataView]"]=ve["[object Date]"]=ve["[object Error]"]=ve["[object Function]"]=ve["[object Map]"]=ve["[object Number]"]=ve["[object Object]"]=ve["[object RegExp]"]=ve["[object Set]"]=ve["[object String]"]=ve["[object WeakMap]"]=!1;var ye="object"==typeof exports&&exports&&!exports.nodeType&&exports,me=ye&&"object"==typeof module&&module&&!module.nodeType&&module,ge=me&&me.exports===ye&&s.process,we=function(){try{var t=me&&me.require&&me.require("util").types;return t||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),be=we&&we.isTypedArray,_e=be?function(t){return function(e){return t(e)}}(be):function(t){return b(t)&&he(t.length)&&!!ve[w(t)]},Se=_e,je=Object.prototype.hasOwnProperty;function Oe(t,e){var r=c(t),n=!r&&ue(t),o=!r&&!n&&le(t),i=!r&&!n&&!o&&Se(t),a=r||n||o||i,u=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],s=u.length;for(var f in t)!e&&!je.call(t,f)||a&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||pe(f,s))||u.push(f);return u}var $e=Object.prototype;function xe(t,e){return function(r){return t(e(r))}}var ke=xe(Object.keys,Object),Ae=Object.prototype.hasOwnProperty;function Me(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||$e))return ke(t);var e,r,n=[];for(var o in Object(t))Ae.call(t,o)&&"constructor"!=o&&n.push(o);return n}function De(t){return null!=t&&he(t.length)&&!x(t)}function Ce(t){return De(t)?Oe(t):Me(t)}function Ee(t){return function(t,e,r){var n=e(t);return c(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Ce,ee)}var Te=Object.prototype.hasOwnProperty;var Ne=z(l,"DataView"),Pe=z(l,"Promise"),Fe=z(l,"Set"),Re=z(l,"WeakMap"),Ie="[object Map]",ze="[object Promise]",Be="[object Set]",Le="[object WeakMap]",He="[object DataView]",Ye=C(Ne),Ue=C(q),We=C(Pe),Je=C(Fe),Ge=C(Re),qe=w;(Ne&&qe(new Ne(new ArrayBuffer(1)))!=He||q&&qe(new q)!=Ie||Pe&&qe(Pe.resolve())!=ze||Fe&&qe(new Fe)!=Be||Re&&qe(new Re)!=Le)&&(qe=function(t){var e=w(t),r="[object Object]"==e?t.constructor:void 0,n=r?C(r):"";if(n)switch(n){case Ye:return He;case Ue:return Ie;case We:return ze;case Je:return Be;case Ge:return Le}return e});var Ve=qe,Ze="[object Arguments]",Ke="[object Array]",Qe="[object Object]",Xe=Object.prototype.hasOwnProperty;function tr(t,e,r,n,o,i){var a=c(t),u=c(e),s=a?Ke:Ve(t),f=u?Ke:Ve(e),l=(s=s==Ze?Qe:s)==Qe,d=(f=f==Ze?Qe:f)==Qe,p=s==f;if(p&&le(t)){if(!le(e))return!1;a=!0,l=!1}if(p&&!l)return i||(i=new Ht),a||Se(t)?Jt(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new Gt(t),new Gt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return U(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=qt;case"[object Set]":var c=1&n;if(u||(u=Vt),t.size!=e.size&&!c)return!1;var s=a.get(t);if(s)return s==e;n|=2,a.set(t,e);var f=Jt(u(t),u(e),n,o,i,a);return a.delete(t),f;case"[object Symbol]":if(Kt)return Kt.call(t)==Kt.call(e)}return!1}(t,e,s,r,n,o,i);if(!(1&r)){var h=l&&Xe.call(t,"__wrapped__"),v=d&&Xe.call(e,"__wrapped__");if(h||v){var y=h?t.value():t,m=v?e.value():e;return i||(i=new Ht),o(y,m,r,n,i)}}return!!p&&(i||(i=new Ht),function(t,e,r,n,o,i){var a=1&r,u=Ee(t),c=u.length;if(c!=Ee(e).length&&!a)return!1;for(var s=c;s--;){var f=u[s];if(!(a?f in e:Te.call(e,f)))return!1}var l=i.get(t),d=i.get(e);if(l&&d)return l==e&&d==t;var p=!0;i.set(t,e),i.set(e,t);for(var h=a;++s<c;){var v=t[f=u[s]],y=e[f];if(n)var m=a?n(y,v,f,e,t,i):n(v,y,f,t,e,i);if(!(void 0===m?v===y||o(v,y,r,n,i):m)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var g=t.constructor,w=e.constructor;g==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof w&&w instanceof w||(p=!1)}return i.delete(t),i.delete(e),p}(t,e,r,n,o,i))}function er(t,e,r,n,o){return t===e||(null==t||null==e||!b(t)&&!b(e)?t!=t&&e!=e:tr(t,e,r,n,er,o))}function rr(t){return t==t&&!$(t)}function nr(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function or(t){var e=function(t){for(var e=Ce(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,rr(o)]}return e}(t);return 1==e.length&&e[0][2]?nr(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var c=(u=r[o])[0],s=t[c],f=u[1];if(a&&u[2]){if(void 0===s&&!(c in t))return!1}else{var l=new Ht;if(n)var d=n(s,f,c,t,e,l);if(!(void 0===d?er(f,s,3,n,l):d))return!1}}return!0}(r,t,e)}}function ir(t,e){return null!=t&&e in Object(t)}function ar(t,e){return null!=t&&function(t,e,r){for(var n=-1,o=(e=ft(e,t)).length,i=!1;++n<o;){var a=lt(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&he(o)&&pe(a,o)&&(c(t)||ue(t))}(t,e,ir)}function ur(t){return t}function cr(t){return function(e){return null==e?void 0:e[t]}}function sr(t){return O(t)?cr(lt(t)):function(t){return function(e){return dt(e,t)}}(t)}function fr(t){return"function"==typeof t?t:null==t?ur:"object"==typeof t?c(t)?function(t,e){return O(t)&&rr(e)?nr(lt(t),e):function(r){var n=pt(r,t);return void 0===n&&n===e?ar(r,t):er(e,n,3)}}(t[0],t[1]):or(t):sr(t)}var lr,dr=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var u=i[lr?a:++n];if(!1===e(o[u],u,o))break}return t};var pr=function(t,e){return function(r,n){if(null==r)return r;if(!De(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&!1!==n(a[i],i,a););return r}}(function(t,e){return t&&dr(t,e,Ce)}),hr=pr;function vr(t,e){var r=-1,n=De(t)?Array(t.length):[];return hr(t,function(t,o,i){n[++r]=e(t,o,i)}),n}function yr(t,e){return vt(t)&&Pt(e)?0===(e=Nt(e))?t:function(t,e){if(!vt(t))return"";if(!Pt(e))return"";if(0===(e=Nt(e)))return"";let r=t.length-e;return r<0&&(r=0),t.substring(r,r+e)}(t,t.length-e):""}function mr(t,e){var r=[];return hr(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r}function gr(t,e){return(c(t)?Qt:mr)(t,fr(e))}function wr(t){return"[object Array]"===Object.prototype.toString.call(t)}function br(t){return!0===(e=t)||!1===e||b(e)&&"[object Boolean]"==w(e);var e}function _r(t){return"[object Object]"===Object.prototype.toString.call(t)}function Sr(t,e){return!!_r(t)&&(!(!vt(e)&&!kt(e))&&e in t)}function jr(t,e,r,n={}){let o=pt(n,"withInfor");br(o)||(o=!0);let i={del:[],add:[],same:[],diff:[]};if(!vt(r))return console.log("invalid key"),o&&(i.infor={}),i;wr(t)||(t=[t]),wr(e)||(e=[e]),t=gr(t,t=>Sr(t,r)),e=gr(e,t=>Sr(t,r));let a=new Map(e.map(t=>[t[r],t]));for(let e of t){let t=a.get(e[r]);if(t){JSON.stringify(e)===JSON.stringify(t)?i.same.push(t):i.diff.push(t),a.delete(e[r])}else i.del.push(e)}if(i.add=Array.from(a.values()),o){let t={};for(let e of i.del)t[e[r]]="del";for(let e of i.add)t[e[r]]="add";for(let e of i.diff)t[e[r]]="diff";for(let e of i.same)t[e[r]]="same";i.infor=t}return i}function Or(t,e,r){var n=null==t?0:t.length;return n?function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(t,(e=r||void 0===e?1:xt(e))<0?0:e,n):[]}function $r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function xr(t,e){var r;return(c(t)?$r:hr)(t,"function"==typeof(r=e)?r:ur)}function kr(){let t,e,r=new Promise(function(){t=arguments[0],e=arguments[1]});return r.resolve=t,r.reject=e,r}function Ar(t,e){let r=kr();if(!wr(t)&&!_r(t))return r.reject("rs is not an array or object"),r;let n=!1;if(_r(t)){n=!0;let e=[];xr(t,(t,r)=>{e.push({k:r,v:t})}),t=e}Ft(e)||(e=function(t){return t});let o=-1,i=[];return t.reduce(function(t,r){return t.then(function(t){i.push(t),o+=1;let a=o,u=r;return n&&(a=r.k,u=r.v),Ft(e)?e(u,a):u})},Promise.resolve()).then(function(t){i.push(t),i=Or(i),r.resolve(i)}).catch(function(t){r.reject(t)}),r}function Mr(t,e={}){let r=pt(e,"fs");return!!r.existsSync(t)&&(!r.lstatSync(t).isDirectory()&&!r.lstatSync(t).isSymbolicLink())}function Dr(t,e,r={}){let n=pt(r,"path"),o=pt(r,"fs"),i=pt(r,"useSync","");br(i)||(i=!0);let a="";return a=i?function(t,e,r={}){let n=pt(r,"path"),o=pt(r,"fs");if(!Mr(t,{fs:o}))return{error:`fpSrc[${t}] is not a file`};try{Bt(n.dirname(e),{fs:o}),o.copyFileSync(t,e)}catch(t){return{error:t}}return{success:"done: "+e}}(t,e,{path:n,fs:o}):async function(t,e,r={}){let n=pt(r,"path"),o=pt(r,"fs");if(!Mr(t,{fs:o}))return{error:`fpSrc[${t}] is not a file`};let i=null;return await(async(t,e)=>{Bt(n.dirname(e),{fs:o}),await new Promise((r,n)=>{let i=o.createReadStream(t),a=o.createWriteStream(e);i.on("error",n),a.on("error",n),a.on("finish",r),i.pipe(a)})})(t,e).then(()=>{i={success:"done: "+e}}).catch(t=>{i={error:t}}),i}(t,e,{path:n,fs:o}),a}function Cr(t,e={}){let r=pt(e,"fs");if(!r.existsSync(t))return{success:"file does not exist: "+t};if(!Mr(t,{fs:r}))return{error:"input path is not a file: "+t};try{r.unlinkSync(t)}catch(t){return{error:t}}return{success:"done: "+t}}function Er(t,e,r={}){let n=pt(r,"path"),o=pt(r,"fs");if(!It(t,{fs:o}))return{error:`fpSrc[${t}] is not a folder`};try{o.readdirSync(t).forEach(function(r){let i=n.resolve(t,r),a=n.resolve(e,r),u=o.lstatSync(i);if(u.isDirectory())Bt(a,{fs:o}),Er(i,a,{path:n,fs:o});else if(u.isSymbolicLink()){let t=o.readlinkSync(i);o.symlinkSync(t,a)}else Bt(n.dirname(a),{fs:o}),o.copyFileSync(i,a)})}catch(t){return{error:t}}return{success:"done: "+e}}function Tr(t,e,r={}){let n=pt(r,"path"),o=pt(r,"fs"),i=pt(r,"useSync","");br(i)||(i=!0);let a="";return a=i?Er(t,e,{path:n,fs:o}):async function(t,e,r={}){let n=pt(r,"path"),o=pt(r,"fs");if(!It(t,{fs:o}))return{error:`fpSrc[${t}] is not a folder`};let i=async(t,e)=>{let r=o.readdirSync(t);for(let a of r){let r=n.join(t,a),u=n.join(e,a),c=o.lstatSync(r);if(c.isDirectory())Bt(u,{fs:o}),await i(r,u);else if(c.isSymbolicLink()){let t=o.readlinkSync(r);o.symlinkSync(t,u)}else Bt(n.dirname(u),{fs:o}),await new Promise((t,e)=>{let n=o.createReadStream(r),i=o.createWriteStream(u);n.on("error",e),i.on("error",e),i.on("finish",t),n.pipe(i)})}},a=null;return await i(t,e).then(()=>{a={success:"done: "+e}}).catch(t=>{a={error:t}}),a}(t,e,{path:n,fs:o}),a}function Nr(t){if(!Mt(t))return!1;return Nt(t)>0}function Pr(t,e=1,r={}){let n=1,o=pt(r,"path"),i=pt(r,"fs");if(!It(t,{fs:i}))throw new Error(`fd[${t}] is not a folder`);return null!==e&&Nr(e)&&(e=Nt(e))<1&&(e=1),function t(r){let a=[];return It(r,{fs:i})?(xr(i.readdirSync(r),function(u){let c=o.resolve(r,u),s=null;try{s=i.statSync(c)}catch(t){}s&&s.isDirectory()?(a.push({isFolder:!0,level:n,path:c,name:o.basename(c)}),n+=1,(n<=e||null===e)&&(a=a.concat(t(c))),n-=1):a.push({isFolder:!1,level:n,path:c,name:o.basename(c)})}),a):a}(t)}function Fr(t,e={}){let r=pt(e,"fs"),n=pt(e,"crypto"),o=pt(e,"type","");vt(o)||(o="sha512");let i=kr();if(!Mr(t,{fs:r}))return i.reject(`fp[${t}] is not a file`),i;try{let e=n.createHash(o),a=r.createReadStream(t);a.on("readable",()=>{let t=a.read();t?e.update(t):i.resolve(e.digest("hex"))}),a.on("error",t=>{i.reject(t.toString())})}catch(t){i.reject(t.toString())}return i}var Rr=Array.prototype.join;async function Ir(t,e={}){let r=pt(e,"path"),n=pt(e,"fs"),o=pt(e,"crypto"),i=pt(e,"type","");vt(i)||(i="md5");let a=[],u=Pr(t,null,{path:r,fs:n});var c,s;return await Ar(u,async t=>{if(t.isFolder)return;let e=await Fr(t.path,{fs:n,crypto:o,type:i});a.push(e)}),s="|",null==(c=a)?"":Rr.call(c,s)}async function zr(t,e=1,r={}){let n=pt(r,"path"),o=pt(r,"fs"),i=pt(r,"crypto"),a=pt(r,"type","");vt(a)||(a="md5");let u=pt(r,"forFile",null);br(u)||(u=!0);let c=pt(r,"forFolder",null);if(br(c)||(c=!1),!It(t,{fs:o}))throw new Error(`fd[${t}] is not a folder`);let s=Pr(t,e,{path:n,fs:o});return s=await Ar(s,async t=>{let e="";return u&&!t.isFolder&&(e=await Fr(t.path,{fs:o,crypto:i,type:a})),c&&t.isFolder&&(e=await Ir(t.path,{path:n,fs:o,crypto:i,type:a})),t.hash=e,t}),s}async function Br(t,e,r={}){let n=pt(r,"path"),o=pt(r,"fs"),i=pt(r,"crypto"),a=pt(r,"type","");if(vt(a)||(a="md5"),!It(t,{fs:o}))throw new Error(`fdSrc[${t}] is not a folder`);if(!It(e,{fs:o}))return void await Tr(t,e,{path:n,fs:o,useSync:!1});let u=n.sep,s=n.sep.length,f=(t,e)=>{let r=t.isFolder?"folder":"file",n=t.path.replace(e,"");var o,i;return i=s,(vt(o=n)&&Pt(i)?0===(i=Nt(i))?"":o.substring(0,i):"")===u&&(n=yr(n,s)),n=n.replaceAll("\\","/"),{id:`${r}|${n}`,isFolder:t.isFolder,name:t.name,rpath:n,hash:t.hash}},l=(t,e)=>{var r,n;return n=t=>f(t,e),t=(c(r=t)?it:vr)(r,fr(n))},d=await zr(t,null,{path:n,fs:o,crypto:i,type:a,forFile:!0,forFolder:!1});d=l(d,n.resolve(t));let p=await zr(e,null,{path:n,fs:o,crypto:i,type:a,forFile:!0,forFolder:!1});p=l(p,n.resolve(e));let h=jr(p,d,"id",{withInfor:!1});await Ar(h.del,async t=>{if(t.isFolder){!function(t,e={}){let r=pt(e,"fs");if(!r.existsSync(t))return{success:"folder does not exist: "+t};if(!It(t,{fs:r}))return{error:"input path is not a folder: "+t};try{r.rmSync(t,{recursive:!0,force:!0})}catch(t){return{error:t}}}(n.resolve(e,t.rpath),{fs:o})}}),await Ar(h.del,async t=>{if(!t.isFolder){Cr(n.resolve(e,t.rpath),{fs:o})}}),await Ar([...h.add,...h.diff],async r=>{if(!r.isFolder){let i=n.resolve(t,r.rpath),a=n.resolve(e,r.rpath);await Dr(i,a,{path:n,fs:o,useSync:!1})}})}var Lr=cr("length"),Hr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Yr="\\ud800-\\udfff",Ur="["+Yr+"]",Wr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Jr="\\ud83c[\\udffb-\\udfff]",Gr="[^"+Yr+"]",qr="(?:\\ud83c[\\udde6-\\uddff]){2}",Vr="[\\ud800-\\udbff][\\udc00-\\udfff]",Zr="(?:"+Wr+"|"+Jr+")"+"?",Kr="[\\ufe0e\\ufe0f]?",Qr=Kr+Zr+("(?:\\u200d(?:"+[Gr,qr,Vr].join("|")+")"+Kr+Zr+")*"),Xr="(?:"+[Gr+Wr+"?",Wr,qr,Vr,Ur].join("|")+")",tn=RegExp(Jr+"(?="+Jr+")|"+Xr+Qr,"g");function en(t){return function(t){return Hr.test(t)}(t)?function(t){for(var e=tn.lastIndex=0;tn.test(t);)++e;return e}(t):Lr(t)}function rn(t){if(null==t)return 0;if(De(t))return"string"==typeof(e=t)||!c(e)&&b(e)&&"[object String]"==w(e)?en(t):t.length;var e,r=Ve(t);return"[object Map]"==r||"[object Set]"==r?t.size:Me(t).length}function nn(t){if(_r(t)){for(let e in t)return!0;return!1}return!1}var on="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function an(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function un(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){if(this instanceof t){var r=[null];return r.push.apply(r,arguments),new(Function.bind.apply(e,r))}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})}),r}var cn={exports:{}};var sn,fn={exports:{}},ln=un(Object.freeze({__proto__:null,default:{}}));function dn(){return sn||(sn=1,function(t){var e;t.exports=(e=e||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==on&&on.crypto&&(r=on.crypto),!r)try{r=ln}catch(t){}var n=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),i={},a=i.lib={},u=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=u.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,o=t.sigBytes;if(this.clamp(),n%4)for(var i=0;i<o;i++){var a=r[i>>>2]>>>24-i%4*8&255;e[n+i>>>2]|=a<<24-(n+i)%4*8}else for(var u=0;u<o;u+=4)e[n+u>>>2]=r[u>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(n());return new c.init(e,t)}}),s=i.enc={},f=s.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new c.init(r,e/2)}},l=s.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new c.init(r,e)}},d=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},p=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r,n=this._data,o=n.words,i=n.sigBytes,a=this.blockSize,u=i/(4*a),s=(u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0))*a,f=t.min(4*s,i);if(s){for(var l=0;l<s;l+=a)this._doProcessBlock(o,l);r=o.splice(0,s),n.sigBytes-=f}return new c.init(r,f)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});a.Hasher=p.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new h.HMAC.init(t,r).finalize(e)}}});var h=i.algo={};return i}(Math),e)}(fn)),fn.exports}!function(t){t.exports=dn().enc.Utf8}(cn);var pn=an(cn.exports),hn={exports:{}};!function(t){var e;t.exports=(e=dn(),function(){var t=e,r=t.lib.WordArray;function n(t,e,n){for(var o=[],i=0,a=0;a<e;a++)if(a%4){var u=n[t.charCodeAt(a-1)]<<a%4*2|n[t.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=u<<24-i%4*8,i++}return r.create(o,i)}t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var o=[],i=0;i<r;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,u=0;u<4&&i+.75*u<r;u++)o.push(n.charAt(a>>>6*(3-u)&63));var c=n.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(t){var e=t.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<r.length;i++)o[r.charCodeAt(i)]=i}var a=r.charAt(64);if(a){var u=t.indexOf(a);-1!==u&&(e=u)}return n(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)}(hn);var vn=an(hn.exports);function yn(t){if(!vt(t))return"";let e=pn.parse(t);return vn.stringify(e)}var mn={exports:{}};!function(t){t.exports=function(){var t=1e3,e=6e4,r=36e5,n="millisecond",o="second",i="minute",a="hour",u="day",c="week",s="month",f="quarter",l="year",d="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||e[0])+"]"}},m=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},g={s:m,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),o=r%60;return(e<=0?"+":"-")+m(n,2,"0")+":"+m(o,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),o=e.clone().add(n,s),i=r-o<0,a=e.clone().add(n+(i?-1:1),s);return+(-(n+(r-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:s,y:l,w:c,d:u,D:d,h:a,m:i,s:o,ms:n,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},w="en",b={};b[w]=y;var _="$isDayjsObject",S=function(t){return t instanceof x||!(!t||!t[_])},j=function t(e,r,n){var o;if(!e)return w;if("string"==typeof e){var i=e.toLowerCase();b[i]&&(o=i),r&&(b[i]=r,o=i);var a=e.split("-");if(!o&&a.length>1)return t(a[0])}else{var u=e.name;b[u]=e,o=u}return!n&&o&&(w=o),o||!n&&w},O=function(t,e){if(S(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new x(r)},$=g;$.l=j,$.i=S,$.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var x=function(){function y(t){this.$L=j(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[_]=!0}var m=y.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if($.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(h);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return $},m.isValid=function(){return!(this.$d.toString()===p)},m.isSame=function(t,e){var r=O(t);return this.startOf(e)<=r&&r<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,r){return $.u(t)?this[e]:this.set(r,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var r=this,n=!!$.u(e)||e,f=$.p(t),p=function(t,e){var o=$.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?o:o.endOf(u)},h=function(t,e){return $.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},v=this.$W,y=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(f){case l:return n?p(1,0):p(31,11);case s:return n?p(1,y):p(0,y+1);case c:var w=this.$locale().weekStart||0,b=(v<w?v+7:v)-w;return p(n?m-b:m+(6-b),y);case u:case d:return h(g+"Hours",0);case a:return h(g+"Minutes",1);case i:return h(g+"Seconds",2);case o:return h(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var r,c=$.p(t),f="set"+(this.$u?"UTC":""),p=(r={},r[u]=f+"Date",r[d]=f+"Date",r[s]=f+"Month",r[l]=f+"FullYear",r[a]=f+"Hours",r[i]=f+"Minutes",r[o]=f+"Seconds",r[n]=f+"Milliseconds",r)[c],h=c===u?this.$D+(e-this.$W):e;if(c===s||c===l){var v=this.clone().set(d,1);v.$d[p](h),v.init(),this.$d=v.set(d,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[$.p(t)]()},m.add=function(n,f){var d,p=this;n=Number(n);var h=$.p(f),v=function(t){var e=O(p);return $.w(e.date(e.date()+Math.round(t*n)),p)};if(h===s)return this.set(s,this.$M+n);if(h===l)return this.set(l,this.$y+n);if(h===u)return v(1);if(h===c)return v(7);var y=(d={},d[i]=e,d[a]=r,d[o]=t,d)[h]||1,m=this.$d.getTime()+n*y;return $.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=$.z(this),i=this.$H,a=this.$m,u=this.$M,c=r.weekdays,s=r.months,f=r.meridiem,l=function(t,r,o,i){return t&&(t[r]||t(e,n))||o[r].slice(0,i)},d=function(t){return $.s(i%12||12,t,"0")},h=f||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(v,function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return $.s(e.$y,4,"0");case"M":return u+1;case"MM":return $.s(u+1,2,"0");case"MMM":return l(r.monthsShort,u,s,3);case"MMMM":return l(s,u);case"D":return e.$D;case"DD":return $.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return l(r.weekdaysMin,e.$W,c,2);case"ddd":return l(r.weekdaysShort,e.$W,c,3);case"dddd":return c[e.$W];case"H":return String(i);case"HH":return $.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return h(i,a,!0);case"A":return h(i,a,!1);case"m":return String(a);case"mm":return $.s(a,2,"0");case"s":return String(e.$s);case"ss":return $.s(e.$s,2,"0");case"SSS":return $.s(e.$ms,3,"0");case"Z":return o}return null}(t)||o.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,d,p){var h,v=this,y=$.p(d),m=O(n),g=(m.utcOffset()-this.utcOffset())*e,w=this-m,b=function(){return $.m(v,m)};switch(y){case l:h=b()/12;break;case s:h=b();break;case f:h=b()/3;break;case c:h=(w-g)/6048e5;break;case u:h=(w-g)/864e5;break;case a:h=w/r;break;case i:h=w/e;break;case o:h=w/t;break;default:h=w}return p?h:$.a(h)},m.daysInMonth=function(){return this.endOf(s).$D},m.$locale=function(){return b[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=j(t,e,!0);return n&&(r.$L=n),r},m.clone=function(){return $.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),k=x.prototype;return O.prototype=k,[["$ms",n],["$s",o],["$m",i],["$H",a],["$W",u],["$M",s],["$y",l],["$D",d]].forEach(function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),O.extend=function(t,e){return t.$i||(t(e,x,O),t.$i=!0),O},O.locale=j,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=b[w],O.Ls=b,O.p={},O}()}(mn);var gn=an(mn.exports);function wn(){if(!Ft(gn))throw new Error("invalid dayjs");return gn().format("YYYY-MM-DDTHH:mm:ssZ")}var bn={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new o(n,i||t,a),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],u]:t._events[c].push(u):(t._events[c]=u,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new n:delete t._events[e]}function u(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,i,a){var u=r?r+t:t;if(!this._events[u])return!1;var c,s,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,o),!0;case 5:return f.fn.call(f.context,e,n,o,i),!0;case 6:return f.fn.call(f.context,e,n,o,i,a),!0}for(s=1,c=new Array(l-1);s<l;s++)c[s-1]=arguments[s];f.fn.apply(f.context,c)}else{var d,p=f.length;for(s=0;s<p;s++)switch(f[s].once&&this.removeListener(t,f[s].fn,void 0,!0),l){case 1:f[s].fn.call(f[s].context);break;case 2:f[s].fn.call(f[s].context,e);break;case 3:f[s].fn.call(f[s].context,e,n);break;case 4:f[s].fn.call(f[s].context,e,n,o);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];f[s].fn.apply(f[s].context,c)}}return!0},u.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var u=this._events[i];if(u.fn)u.fn!==e||o&&!u.once||n&&u.context!==n||a(this,i);else{for(var c=0,s=[],f=u.length;c<f;c++)(u[c].fn!==e||o&&!u[c].once||n&&u[c].context!==n)&&s.push(u[c]);s.length?this._events[i]=1===s.length?s[0]:s:a(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u}(bn);var _n=an(bn.exports);function Sn(){return new _n}var jn=xe(Object.getPrototypeOf,Object),On=Function.prototype,$n=Object.prototype,xn=On.toString,kn=$n.hasOwnProperty,An=xn.call(Object);function Mn(t){if(!b(t))return!1;var e=w(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!function(t){if(!b(t)||"[object Object]"!=w(t))return!1;var e=jn(t);if(null===e)return!0;var r=kn.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&xn.call(r)==An}(t)}function Dn(t){let e="";if(Mn(t))e=t.message;else{if(ht(t))return t;if(_r(t))return Sr(t,"message")?t.message:JSON.stringify(t);if(wr(t))return JSON.stringify(t);e=function(t){if(!vt(t)&&!kt(t)&&!_(t))return"";let e="";try{e=String(t)}catch(t){}try{e=t.toString()}catch(t){}return e}(t)}return e}function Cn(e){return Mr(e,{fs:t})}function En(t,e=!1){if(function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t))return"";let r="";try{r=e?JSON.stringify(t,null,2):JSON.stringify(t)}catch(t){r=""}return r}function Tn(t=300){return new function(t){let e=[],r=null,n=null;return Nr(t)||(t=300),t=Nt(t),function(o,...i){Ft(o)?(n=Date.now(),e.push({func:o,input:i}),null===r&&(r=setInterval(()=>{if(Date.now()-n>t){let t=e.pop();e=[],t.func(...t.input)}0===e.length&&(clearInterval(r),r=null)},10))):console.log("func is not a function")}}(t)}function Nn(t,r={}){let i=pt(r,"polling");br(i)||(i=!1);let a=pt(r,"timeInterval");Nr(a)||(a=100),a=Nt(a);let u=pt(r,"timeBinaryInterval");Nr(u)||(u=300),u=Nt(u);let c=new n.EventEmitter,s=t,f=null,l=setInterval(()=>{null===f&&Cn(s)&&(f=o.watch(s,{usePolling:i,interval:a,binaryInterval:u,awaitWriteFinish:!0}),f.on("all",(t,r,n)=>{r=e.resolve(r),c.emit("change",{type:t,fp:r,stats:n})}))},a);return c.clear=()=>{(()=>{if(null!==f){try{f.unwatch(s)}catch(t){console.log(t)}f.close().catch(t=>{console.log(t)}).finally(()=>{f=null})}})(),clearInterval(l)},c}function Pn(e,r,n={}){zt(e)||Lt(e),zt(r)||Lt(r);let o=`${e}/fpHash.json`,i=`${r}/fpHash.json`,a=e=>{let r={};try{r=function(t){if(!vt(t))return{};let e={};try{e=JSON.parse(t)}catch(t){e={}}return e}(t.readFileSync(e,"utf8"))}catch(t){}return r},u=(e,r)=>{try{let n=En(r);t.writeFileSync(e,n,"utf8")}catch(t){}},c=(t,e)=>pt(a(t),e,""),s=(t,e,r)=>{let n=a(t);n[e]=r,u(t,n)},f=(t,e)=>{let r=a(t);Sr(r,e)&&delete r[e],u(t,r)},l=()=>a(o),d=t=>u(o,t),p=t=>c(o,t),h=()=>a(i),v=t=>u(i,t),y=t=>c(i,t),m=(t,e)=>s(i,t,e),g=t=>f(i,t),w=t=>{let e=[];return xr(t,(t,r)=>{e.push({fp:r,hash:t})}),e};return{buildSrc:()=>{let t=Sn();return t.set=(e,r)=>{((t,e)=>{s(o,t,e)})(e,r),t.emit("set",{type:"set",fp:e,hash:r})},t.get=p,t.remove=e=>{(t=>{f(o,t)})(e),t.emit("remove",{type:"remove",fp:e})},t.readKp=l,t.writeKp=d,t},buildTar:()=>{let t=Sn(),e=Tn(300),r=Nn(o);return r.on("change",r=>{e(()=>{(async()=>{let e=kr(),r=l();if(!nn(r))return e.resolve("no src"),e;let n=h(),o=w(r),i=jr(w(n),o,"fp",{withInfor:!1}),a=kr();return a.then(t=>{v(r)}).catch(()=>{}),t.emit("change",{kpSrc:r,kpTar:n,kpCmp:i,pm:a}),e})().catch(()=>{})})}),t.set=m,t.get=y,t.remove=g,t.readKp=h,t.writeKp=v,t.clear=r.clear,t}}}let Fn=i.fileURLToPath("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(Fn).href:"undefined"==typeof document?location.href:u&&"SCRIPT"===u.tagName.toUpperCase()&&u.src||new URL("w-dwdata-builder.umd.js",document.baseURI).href),Rn=e.dirname(Fn);let In=async(r={})=>{let n=pt(r,"keyId");vt(n)||(n="id");let o=pt(r,"fdTagRemove");vt(o)||(o="./_tagRemove");let i=pt(r,"fdTaskCpActualSrc");vt(i)||(i="./_taskCpActualSrc"),zt(i)||Lt(i);let u=pt(r,"fdTaskCpSrc");vt(u)||(u="./_taskCpSrc"),zt(u)||Lt(u);let c=pt(r,"fdLog");vt(c)||(c="./_logs"),zt(c)||Lt(c);let s=pt(r,"funGetNew");if(!Ft(s))throw new Error("invalid funGetNew");let f=pt(r,"funGetCurrent");if(!Ft(f))throw new Error("invalid funGetCurrent");let l=pt(r,"funAdd"),d=pt(r,"funModify"),p=pt(r,"funRemove"),h=pt(r,"funAfterStart"),v=pt(r,"funBeforeEnd"),y=pt(r,"timeToleranceRemove");Pt(y)||(y=0),y=At(y),y>0&&!zt(o)&&Lt(o);let m=pt(r,"eventNameProcCallfunGetNew");vt(m)||(m="proc-callfun-getNew");let g=pt(r,"eventNameProcCallfunGetCurrent");vt(g)||(g="proc-callfun-getCurrent");let w=pt(r,"eventNameProcAddCallfunAdd");vt(w)||(w="proc-add-callfun-add");let b=pt(r,"eventNameProcDiffCallfunModify");vt(b)||(b="proc-diff-callfun-modify");let _=pt(r,"eventNameProcRemoveCallfunRemove");vt(_)||(_="proc-remove-callfun-remove");let S=pt(r,"eventNameProcCallfunAfterStart");vt(S)||(S="proc-callfun-afterStart");let j=pt(r,"eventNameProcCallfunBeforeEnd");vt(j)||(j="proc-callfun-beforeEnd");let O=pt(r,"eventNameProcCoreDetect");vt(O)||(O="proc-coreDetect");let $=pt(r,"eventNameProcRetakeRemove");vt($)||($="proc-retake-remove");let x=pt(r,"eventNameProcCoreRetake");vt(x)||(x="proc-coreRetake");let k=Sn(),A=function(t={}){let r=pt(t,"fdLog");vt(r)||(r="./_logs");let n=pt(t,"interval");"day"!==n&&"hr"!==n&&(n="day");let o=a.transport({targets:[{level:"info",target:e.resolve(Rn,"./formatter.mjs"),options:{interval:n,fdLog:r}}]});return a(o)}({fdLog:c,interval:"hr"}),M={info:t=>{A.info(t),k.emit("change",{type:"info",...t})},warn:t=>{A.warn(t),k.emit("change",{type:"warn",...t})},error:t=>{A.error(t),k.emit("change",{type:"error",...t})}},D=async e=>{let r=await(async(e,r,n="")=>{let i="";if("add"===e)throw new Error("does not support add");if("modify"===e)throw new Error("does not support modify");if("remove"!==e)throw new Error(`invalid mode[${e}]`);i=o;let a=`${i}/${r}`,u={time:wn(),hash:n};t.writeFileSync(a,JSON.stringify(u),"utf8")})("remove",e);return r},C=async(e,r={})=>{let n=await(async(e,r,n={})=>{let i=pt(n,"checkTime");br(i)||(i=!0);let a=pt(n,"timeNow"),u="",c=0;if("add"===e)throw new Error("does not support add");if("modify"===e)throw new Error("does not support modify");if("remove"!==e)throw new Error(`invalid mode[${e}]`);u=o,c=y;let s=`${u}/${r}`;if(!Cn(s))return{b:!1,msg:`fp[${s}] is not a file`};if(!i)return{b:!0,msg:`fp[${s}] exists`};if(!nn(a))throw new Error("invalid timeNow");let f=t.readFileSync(s,"utf8"),l=pt(JSON.parse(f),"time"),d=gn(l),p=a.diff(d,"millisecond"),h=p>=c;return h?{b:h,msg:`time difference[${p}] >= time tolerance[${c}]`}:{b:h,msg:"allowable time difference"}})("remove",e,r);return n},E=async(e,r)=>{let n="";if("add"===e)throw new Error("does not support add");if("modify"===e)throw new Error("does not support modify");if("remove"!==e)throw new Error(`invalid mode[${e}]`);n=o;let i=`${n}/${r}`;if(!Cn(i))return;let a=t.readFileSync(i,"utf8"),u=JSON.parse(a),c=Cr(i,{fs:t});if(c.error)throw new Error(c.error);return u},T=async t=>await E("remove",t),N=null,P=null,F=(async()=>{await function(t=10){kt(t)||(t=10);let e=kr();return setTimeout(function(){e.resolve()},t),e}(1);let t=gn();M.info({event:"start",timeRunStart:t.format("YYYY-MM-DDTHH:mm:ssZ"),msg:"running..."});let e=Pn(i,i);N=e.buildSrc();let r=Pn(u,u);P=r.buildSrc();let o="";vt(o)||await(async()=>{if(Ft(h))try{M.info({event:S,msg:"start..."});let t=h();Rt(t)&&(t=await t),M.info({event:S,msg:"done"})}catch(t){console.log(t),M.error({event:S,msg:Dn(t)}),o="error at proc-callfun-afterStart"}return vt(o)?(console.log("error occurred, task canceled"),void M.info({event:"cancel-stage-afterStart",msg:o})):null})().catch(()=>{});vt(o)||await(async()=>{let t=[];try{M.info({event:m,msg:"start..."});let e=s();Rt(e)&&(e=await e),t=e,M.info({event:m,num:rn(e),msg:"done"})}catch(t){console.log(t),M.error({event:m,msg:Dn(t)}),o="error at proc-callfun-getNew"}if(vt(o))return console.log("error occurred, task canceled"),void M.info({event:"cancel-stage-main",msg:o});let e=[];try{M.info({event:g,msg:"start..."});let t=f();Rt(t)&&(t=await t),e=t,M.info({event:g,num:rn(t),msg:"done"})}catch(t){console.log(t),M.error({event:g,msg:Dn(t)}),o="error at proc-callfun-getCurrent"}if(vt(o))return console.log("error occurred, task canceled"),void M.info({event:"cancel-stage-main",msg:o});if(0===rn(t))return console.log("invalid data, task canceled"),void M.info({event:"cancel-stage-main",msg:"no data"});let r=null;try{M.info({event:"proc-compare",msg:"start..."}),r=jr(e,t,n,{withInfor:!1});let o=rn(r.del),i=rn(r.add),a=rn(r.diff),u=rn(r.same);M.info({event:"proc-compare",numRemove:o,numAdd:i,numModify:a,numSame:u,msg:"done"})}catch(t){console.log(t),M.error({event:"proc-compare",msg:Dn(t)}),o="error at proc-compare"}return vt(o)?(console.log("error occurred, task canceled"),void M.info({event:"cancel-stage-main",msg:o})):nn(r)?0!==rn(r.del)||0!==rn(r.add)||0!==rn(r.diff)?(await Ar(r.del,async t=>{if(!vt(o)){try{if(M.info({event:_,[n]:t[n],msg:"start..."}),Ft(p)){let e=p(t);Rt(e)&&(e=await e)}}catch(e){console.log(e),M.error({event:_,[n]:t[n],msg:Dn(e)}),o="error at proc-remove-callfun-remove"}if(!vt(o))try{N.remove(t[n]),y<=0?(P.remove(t[n]),M.info({event:_,[n]:t[n],msg:"done"})):(await C(t[n],{checkTime:!1})).b||(await D(t[n]),M.info({event:_,[n]:t[n],msg:"add-tag"}))}catch(e){console.log(e),M.error({event:_,[n]:t[n],msg:Dn(e)}),o="error at proc-remove-callfun-remove"}}}),vt(o)?(console.log("error occurred, task canceled"),void M.info({event:"cancel-stage-main",msg:o})):(await Ar(r.add,async t=>{if(!vt(o)){try{if(M.info({event:w,[n]:t[n],msg:"start..."}),Ft(l)){let e=l(t);Rt(e)&&(e=await e)}}catch(e){console.log(e),M.error({event:w,[n]:t[n],msg:Dn(e)}),o="error at proc-add-callfun-add"}if(!vt(o))try{let e=yn(JSON.stringify(t));N.set(t[n],e),P.set(t[n],e),y>0&&(await C(t[n],{checkTime:!1})).b&&(await T(t[n]),M.info({event:w,[n]:t[n],msg:"release-tag"})),M.info({event:w,[n]:t[n],msg:"done"})}catch(e){console.log(e),M.error({event:w,[n]:t[n],msg:Dn(e)}),o="error at proc-add-callfun-add"}}}),vt(o)?(console.log("error occurred, task canceled"),void M.info({event:"cancel-stage-main",msg:o})):(await Ar(r.diff,async t=>{if(!vt(o)){try{if(M.info({event:b,[n]:t[n],msg:"start..."}),Ft(d)){let e=d(t);Rt(e)&&(e=await e)}}catch(e){console.log(e),M.error({event:b,[n]:t[n],msg:Dn(e)}),o="error at proc-diff-callfun-modify"}if(!vt(o))try{let e=yn(JSON.stringify(t));N.set(t[n],e),P.set(t[n],e),M.info({event:b,[n]:t[n],msg:"done"})}catch(e){console.log(e),M.error({event:b,[n]:t[n],msg:Dn(e)}),o="error at proc-diff-callfun-modify"}}}),vt(o)?(console.log("error occurred, task canceled"),void M.info({event:"cancel-stage-main",msg:o})):null))):void M.info({event:"cancel-stage-main",msg:"no difference"}):(console.log("can not calculate the difference, task canceled"),void M.info({event:"cancel-stage-main",msg:"can not calculate the difference between the data before and after"}))})().catch(()=>{});await(async()=>{if(Ft(v))try{M.info({event:j,msg:"start..."});let t=v();Rt(t)&&(t=await t),M.info({event:j,msg:"done"})}catch(t){console.log(t),M.error({event:j,msg:Dn(t)}),o="error at proc-callfun-beforeEnd"}return vt(o)?(console.log("error occurred, task canceled"),void M.info({event:"cancel-stage-beforeEnd",msg:o})):null})().catch(()=>{}),M.info({event:"end",...(()=>{let e=gn(),r=e.diff(t,"second");return{timeRunStart:t.format("YYYY-MM-DDTHH:mm:ssZ"),timeRunEnd:e.format("YYYY-MM-DDTHH:mm:ssZ"),timeRunSpent:`${r}s`}})(),msg:"done"})})().catch(t=>{console.log(t),M.error({event:O,msg:Dn(t)})}),R=(async()=>{if(y<=0)return;await async function(t,e={}){let r=null,n=kr();if(!Ft(t))return n.reject("waitfunction需輸入函數f"),n;let o=async()=>{let e=t();return Rt(e)&&(e=await e),e};if(r=await o(),!0===r)return n.resolve(),n;let i=pt(e,"attemptNum",null);Nr(i)||(i=200);let a=pt(e,"timeInterval",null);Nr(a)||(a=1e3);let u=0,c=setInterval(async()=>{u+=1,r=await o(),!0===r&&(clearInterval(c),n.resolve()),u>i&&(clearInterval(c),n.reject(`exceeded attemptNum[${i}]`))},a);return n}(()=>null!==P);let r=gn(),i=function(r,n=1){return Pr(r,n,{path:e,fs:t})}(o,1);0!==rn(i)&&await Ar(i,async t=>{let e=(await C(t.name,{timeNow:r,checkTime:!0})).b,o=!vt(N.get(t.name)),i=vt(P.get(t.name));e&&o&&i&&(await T(t.name),M.info({event:$,[n]:t.name,from:"debounce",msg:"release-tag"}),P.remove(t.name),M.info({event:$,[n]:t.name,from:"debounce",msg:"done"}))})})().catch(t=>{console.log(t),M.error({event:x,msg:Dn(t)})});return k.srlog=M,Promise.all([F,R]).finally(()=>{k.emit("end")}),k};return async(n={})=>{let o=pt(n,"keyId");vt(o)||(o="id");let i=pt(n,"fdTagRemove");vt(i)||(i="./_tagRemove");let a=pt(n,"fdDwAttime");vt(a)||(a="./_dwAttime"),zt(a)||Lt(a);let u=pt(n,"fdDwCurrent");vt(u)||(u="./_dwCurrent"),zt(u)||Lt(u);let c=pt(n,"fdTaskCpActualSrc");vt(c)||(c="./_taskCpActualSrc"),zt(c)||Lt(c);let s=pt(n,"fdTaskCpSrc");vt(s)||(s="./_taskCpSrc"),zt(s)||Lt(s);let f=pt(n,"fdLog");vt(f)||(f="./_logs"),zt(f)||Lt(f);let l=pt(n,"funDownload");if(!Ft(l))throw new Error("invalid funDownload");let d=pt(n,"funGetCurrent");if(!Ft(d))throw new Error("invalid funGetCurrent");let p=pt(n,"funAdd");if(!Ft(p))throw new Error("invalid funAdd");let h=pt(n,"funModify");if(!Ft(h))throw new Error("invalid funModify");let v=pt(n,"funRemove");if(!Ft(v))throw new Error("invalid funRemove");let y=pt(n,"funAfterStart"),m=pt(n,"funBeforeEnd"),g=pt(n,"timeToleranceRemove");Pt(g)||(g=0),g=At(g);let w=async()=>{await function(n,o,i={}){return Br(n,o,{path:e,fs:t,crypto:r,...i})}(a,u)};return In({keyId:o,fdTagRemove:i,fdTaskCpActualSrc:c,fdTaskCpSrc:s,fdLog:f,funGetNew:l,funGetCurrent:d,funAdd:p,funModify:h,funRemove:v,funAfterStart:async()=>{if(Ft(y)){let t=y();Rt(t)&&(t=await t)}},funBeforeEnd:async()=>{if(await w(),Ft(m)){let t=m();Rt(t)&&(t=await t)}},timeToleranceRemove:g,eventNameProcCallfunGetNew:"proc-callfun-download"})}});
//# sourceMappingURL=w-dwdata-builder.umd.js.map
